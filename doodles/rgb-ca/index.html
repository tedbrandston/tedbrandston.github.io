<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>RGB Cellular Automata</title><link rel=stylesheet href=https://tedbrandston.github.io/css/style.css><script type=module>
    function random_uint(exclusive_upper_bound) {
      return Math.floor(Math.random() * exclusive_upper_bound);
    }

    function log_int(int_to_log) {
      console.log(int_to_log);
    }

    async function init() {
      const canvas = document.getElementById("doodle-canvas");
      const wasm = canvas.getAttribute("wasm-target");

      const { instance } = await WebAssembly.instantiateStreaming(
        fetch(wasm),
        {
          "env": {
            "js_random": Math.random,
            "js_random_uint": random_uint,
            "js_log_int": log_int,
          }
        }
      );

      const width = canvas.width;
      const height = canvas.height;

      const buffer_address = instance.exports.BUFFER.value;
      const image = new ImageData(
          new Uint8ClampedArray(
              instance.exports.memory.buffer,
              buffer_address,
              4 * width * height,
          ),
          width,
      );

      const ctx = canvas.getContext("2d");

      const render = () => {
        instance.exports.go();
        ctx.putImageData(image, 0, 0);
        requestAnimationFrame(render);
      };

      render();
    }

    init();
  </script></head><body class=flex-page><header class=top-nav><a href=/ class="link-home nav-link">Main page</a>
•
<a href=/writing class=nav-link>Writing</a>
•
<a href=/sources class=nav-link>Sources</a>
•
<a href=/recipes class=nav-link>Recipes</a>
•
<a href=/doodles class=nav-link>Doodles</a></header><div class=header><h1>RGB Cellular Automata</h1></div><div class=content><p>Based on Cliff Biffle&rsquo;s tremendously cool <a href=https://cliffle.com/blog/bare-metal-wasm/>rust+webassembly series</a>, and <a href=/doodles/black-and-white-ca/>continuing to riff on cellular automata</a>, this uses three states instead of two. The extra state takes us from 2<sup>3</sup> = 8 &ldquo;parent rules&rdquo; and 2<sup>8</sup> = <a href=https://mathworld.wolfram.com/ElementaryCellularAutomaton.html>256 rulesets</a>, up to 3<sup>3</sup> = 27 &ldquo;parent rules&rdquo; with 3<sup>27</sup> = 7,625,597,484,987 rulesets!</p><p>I found that things got, visually, a little muddled with three colors, so I have it start out zoomed in on each one, so you can see the detail and patterns better, and then zoom out as it finishes calculating the image.</p><canvas id=doodle-canvas width=600 height=800 wasm-target=/wasm-doodles/rgb_ca.wasm><div class=meta></div><div class=comments></div></div><div class=footer>Is it clear I have no idea how to make a website?<br><a href=/tags class="nav-link smaller-text">Index by Tag</a>
•
<a href=/ingredients class="nav-link smaller-text">Index by Ingredient</a>
•
<a href=/writing/comments-reasoning class="nav-link smaller-text">Comments on This Website</a></div></body></html>